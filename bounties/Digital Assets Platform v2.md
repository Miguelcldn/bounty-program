![alt text](https://github.com/bitDubai/media-kit/blob/master/MediaKit/Fermat%20Branding/Fermat%20Logotype/Fermat_Logo_3D.png "Fermat Logo")

# Digital Asset Platform v2 Bounty

## Introduction

After [previous bounty] (link a previous bounty) was completed, new needs have raised the priority to introduce changes and improvements to DAP platform. This document describes the scope, design and timeline of the new bounty.

## Scope

### Current developments in progress

In the present, DAP is being changed and improved in the following way:

* Changes to Community Apps: actually no authorization is requested for connections between DAP actors. Asset Issuer, Asset User and Redeem Point community apps will me modified to perform connections only after authorization is received. [Issue #4692 on Github](https://github.com/bitDubai/fermat/issues/4692)

* Multiple network selection: all DAP wallets and sub apps will allow the selection of the NetworkType (MainNet, TestNet and RegTestNet) while all processes and transactions must still continue working as expected. [Issue #4693 on Github](https://github.com/bitDubai/fermat/issues/4693)

* Wallets GUI small improvements: we are enhancing the user experience by adding Search options, filter of data for assets with no positive balance, etc. [Issue #4694 on Github](https://github.com/bitDubai/fermat/issues/4694)

* BCH layer changes to support all network types: changes to BCH to support transactions in any network concurrently. [Issue #4658 on Github](https://github.com/bitDubai/fermat/issues/4658)

* Chat platform implementation: the team is involved in fixing issues on CHT platform to reach the demo ASAP. [Issue #4234 on Github](https://github.com/bitDubai/fermat/issues/4234)


### Bounty scope

#### New Transaction: Assets Transference.

This transaction will be used to transfer assets between users (Asset User --> Asset User). Current existing transactions regarding distribution only involves Asset Issuer --> Asset User actors.

* Changes to Asset User Wallet: 
    * new button will be added called "Transfer Asset" that will open a new window to allow selection of users to transfer the asset to.
    * new screen that will get the connected Users by the Asset User Community app
    
* New transactional plugin **Asset User Transference** which will handle the transaction steps to transfer the asset with all security needed.

* Changes to **Asset Reception** to allow receiving assets from Issuer *and* User actors.
    
#### New Transaction: Asset Exchange.

This transaction will allow the exchange of Assets between users (Asset User --> Asset User), allowing them to buy and sell assets.

The Asset Exchange transaction will be started by the *Asset Seller*, by sending the *Asset Buyer* the *Asset Metadata* only. This special metadata will be identified by the *Asset Buyer* as an Asset Exchange transaction and will display the received asset as an Asset to buy.

Using the **Asset Transmission** Network Service, the buyer will deliver an *Empty* asset for the buyer to review it and confirm or deny the exchange operation.

Confirmation of denial of exchange operation will be transmitted using the **Actor Asset User** Network Service designing a new *exchangeConfirmation* message.

If exchange confiirmation is approved, the next steps are to perform the payment and Asset tranference transactions as securely as possible:

1. Each exchange participant will send the other a Public Key generated by the respective vault. (Asset Seller from Asset Vault, Asset Buyer from Bitcoin Vault). This public Key will be transmitted with the *Actor Asset User* Network Service with a new message type.

2. Each exchange participant will generate a new bitcoin transaction using their own funds as inputs and a **Multi Signature output** using both keys. After creation this transactions will be broadcasted to the network.

3. After transactions have been confirmed, each participant will notify the other of the Transaction Hash of each transaction and each participant will validate they are correct.

4. Once validation is complete, they will create signatures for the transactions they are receiving funds from and send the signatures to the other participant.

5. Each participant will complete the signing with their own sign on the transaction and broadcast both transactions to complete payment and delivery.

6. When payment is received by *Asset Seller* will be added to the **Bitcoin Wallet** and asset will generate a credit in the **Asset User Wallet** as usual.

---

Changes to implement for this new transaction are:

* **Asset User Wallet** changes to allow an user to sell an asset.
* new transaction plugin **Asset Exchange Asset User Buyer** to handle the transaction in the buyer role.
* new transaction plugin **Asset Exchange Asset User Seller** to handle the transaction in the seller role.
* new DAP Messages to transfer data between users on the **Actor Asset User** network service. This network Service must allow retries and cancellation of messages.
* Changes to Bitcoin and Asset Vaults to support the bitcoins transactions.

***Once approved, the design will be completed in dev.fermat.org flows with much more detail***
     

## Timeline

Based on current workload and resouces available, the delivery date of this bounty will be **March 15th**.

## Evaluation

To be considered success this bounty must pass the following tests:

* Distribute between users an asset in any network.
* Exchange an asset between users in any network.
* The combination of any possible allowed behaviour by the applications without generating errors that doesn't allow to continue the evaluation.

*[Evaluation results to be completed after evaluation]*

## Distribution

*[Distribution to be completed after evaluation]*

